# 实现分布式ID的方案
## 1.UUID
优点：简单，全球唯一  
缺点：如果作为业务唯一ID，UUID没有业务含义，不便于记忆；如果作为数据主键ID，太长，且为字符串， 性能较差；无序，无法自增

## 2.数据库自增ID
mysql，auto_increment，可以作为唯一ID。
缺点：需要单独的mysql服务器，性能比较低，且扩容不方便。
### 单点数据库服务器存在宕机风险怎么办？
可以使用一个数据库集群，避免单点宕机的风险；
### 两个数据库同时生成，生成了两个相同的ID怎么办？
可以使用步长，a数据库生成1,3,5，b数据库生成2,4,6；
### 如果数据库容量不够了，需要扩容怎么办？更改步长后，需要将所有ID重新生成一遍吗？
已经生成的ID可以不变，改变数据库的步长，然后将第三台机器的起始值设置的大一些

## 3.基于数据库的号段模式
每次从数据库拿一个号段，用完后继续申请一个号段。号段模式是绝大部分中型互联网业务的首选方案，在性能和复杂度之间取得了最佳平衡。
美团 Leaf 号段模式是典型案例。

## 4.Redis
利用Redis的单线程原子操作INCR或INCRBY来生成递增ID。  
- 优点：比数据库自增ID性能更高，且支持分布式环境。  
- 缺点：需要Redis服务器，且Redis单线程处理请求，性能有限。  

## 5.雪花算法
由一个 64位的Long 类型数字组成，分为以下几部分：
- 1位符号位：始终为0，表示正数
- 41位时间戳：毫秒级时间戳，表示从某个固定时间点（如2020年1月1日）开始的毫秒数
- 10位机器ID：用于标识不同的机器或节点，通常由数据中心ID和机器ID组成
- 12位序列号：在同一毫秒内生成的序列号，用于处理同一毫秒内的多次请求
### 优缺点
- 优点：生成的ID有序，且可以在分布式环境中保证唯一性；完全本地生成，性能极高，理论上支持巨量并发。
- 缺点：需要时钟同步，如果机器时间不一致，可能会导致ID重复或乱序。
