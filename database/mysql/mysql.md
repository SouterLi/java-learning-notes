# MySQL
## 聚簇索引
### 什么是聚簇索引
聚簇索引是 InnoDB 存储引擎的核心特性。与普通索引不同，聚簇索引的叶子节点直接存储完整的行数据（而非指向数据的指针），一个表只能有一个聚簇索引。   
非叶子节点：存储主键和指向子节点的指针。  
叶子节点：存储完整的行数据（所有列的值）。
### 聚簇索引为什么用B+树
  1.由于B+树的非叶子节点只存储主键值和指向子节点的指针，不存储实际数据，相同的磁盘页可以存放更多的子节点的指针，树的结构更加矮胖，查询效率更高。  
  2.范围查询高效，B+树的叶子节点之间有链表相连，当进行范围查询时，只需要找到最开始的一条数据，就可以顺序扫描链表直接查到其他的数据。  
  3.全表扫描更加高效，也是因为数据有链表相连，不需要遍历整个树。  
  4.更稳定的查询效率。
### 聚簇索引有什么优点和缺点
#### 优点  
  1. 主键查询极快：直接通过 B+树定位到数据，无需回表。  
  2. 范围查询高效：相邻数据物理上连续存储，减少磁盘 I/O。  
  3. 覆盖索引优化：若查询的列全部在索引中，无需访问数据行。  
#### 缺点  
  1. 二级索引需回表：通过二级索引查询非索引列时，需额外查找聚簇索引（可通过覆盖索引优化）。  
### 覆盖索引
覆盖索引是指查询的所有列都包含在索引中，无需回表查询数据行。  
  优点：提高查询性能，避免回表操作。

## mysql中的几个log
### Binlog
逻辑日志（记录 SQL 语句或行变更）  
作用：数据同步，数据恢复
### Redo Log
物理日志，记录页级别的修改，比如修改文件A的第100页偏移量50处的字节为值X。Redo Log遵循WAL原则，先写log，再写数据，只要redolog写完，事务就可以提交了。  
作用：保证事务持久性，在事务提交前，先将变更写入 Redo Log，即使崩溃也能恢复  
### Undo Log
逻辑日志，存储在系统表空间或独立的 Undo 表空间  
作用：保证事务的原子性，用于事务回滚，MVCC  

